<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>ðŸ”¥ Ù„Ø¹Ø¨Ø© Ø­Ø±Ø¨ Ø¨Ø³ÙŠØ·Ø©</title>
  <style>
    body { margin:0; background:#111; overflow:hidden; }
    canvas { display:block; margin:0 auto; background:#222; }
  </style>
</head>
<body>
<canvas id="game" width="800" height="500"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let player = { x: 50, y: 220, w: 40, h: 40, color: "cyan" };
let bullets = [];
let enemies = [];
let score = 0;
let gameOver = false;

// Ø±Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨
function drawPlayer() {
  ctx.fillStyle = player.color;
  ctx.fillRect(player.x, player.y, player.w, player.h);
}

// Ø±Ø³Ù… Ø§Ù„Ø±ØµØ§Øµ
function drawBullets() {
  ctx.fillStyle = "yellow";
  bullets.forEach(b => ctx.fillRect(b.x, b.y, b.w, b.h));
}

// Ø±Ø³Ù… Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¡
function drawEnemies() {
  ctx.fillStyle = "red";
  enemies.forEach(e => ctx.fillRect(e.x, e.y, e.w, e.h));
}

// ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±ØµØ§Øµ
function updateBullets() {
  bullets.forEach((b,i) => {
    b.x += 8;
    if (b.x > canvas.width) bullets.splice(i,1);
  });
}

// ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¡
function updateEnemies() {
  enemies.forEach((e,i) => {
    e.x -= 3;
    if (e.x < 0) enemies.splice(i,1);

    // ØªØµØ§Ø¯Ù… Ù…Ø¹ Ø§Ù„Ù„Ø§Ø¹Ø¨
    if (e.x < player.x+player.w && e.x+e.w > player.x &&
        e.y < player.y+player.h && e.y+e.h > player.y) {
      gameOver = true;
    }
  });
}

// ØªØµØ§Ø¯Ù… Ø§Ù„Ø±ØµØ§Øµ Ù…Ø¹ Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¡
function checkCollisions() {
  bullets.forEach((b,bi) => {
    enemies.forEach((e,ei) => {
      if (b.x < e.x+e.w && b.x+b.w > e.x &&
          b.y < e.y+e.h && b.y+b.h > e.y) {
        bullets.splice(bi,1);
        enemies.splice(ei,1);
        score += 10;
      }
    });
  });
}

// Ø±Ø³Ù… Ø§Ù„Ù†Øµ
function drawText() {
  ctx.fillStyle = "white";
  ctx.font = "20px Arial";
  ctx.fillText("Ø§Ù„Ù†Ù‚Ø§Ø·: " + score, 10, 20);
  if (gameOver) {
    ctx.fillStyle = "red";
    ctx.font = "40px Arial";
    ctx.fillText("Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø©!", canvas.width/2-100, canvas.height/2);
  }
}

// Ø­Ù„Ù‚Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©
function loop() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  if (!gameOver) {
    drawPlayer();
    drawBullets();
    drawEnemies();
    updateBullets();
    updateEnemies();
    checkCollisions();
    drawText();
  } else {
    drawText();
  }
  requestAnimationFrame(loop);
}
loop();

// ØªØ­ÙƒÙ… Ø§Ù„Ù„Ø§Ø¹Ø¨
window.addEventListener("keydown", e => {
  if (e.key === "ArrowUp") player.y -= 20;
  if (e.key === "ArrowDown") player.y += 20;
  if (e.key === " ") {
    bullets.push({ x: player.x+player.w, y: player.y+player.h/2-5, w: 10, h: 5 });
  }
});

// ØªÙˆÙ„ÙŠØ¯ Ø£Ø¹Ø¯Ø§Ø¡
setInterval(() => {
  if (!gameOver) {
    let y = Math.random() * (canvas.height-40);
    enemies.push({ x: canvas.width-40, y, w: 40, h: 40 });
  }
}, 1500);
</script>
</body>
</html>
